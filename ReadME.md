# Multicore- und GPU-Computing: Projekt WS 2022-23

Implementation of horizental soble filter for images with use of GPU and Multicore power. This projet tests the new features of OpenMP 5.0 or higher for a project at the HTW Saar. GPU-Offloading is an experimental festure, currently supported in few c and c++ compilers: https://www.openmp.org/resources/openmp-compilers-tools/. OpenMP 5 with teams and SIMD directives are not supported by MinGW or MSVC compilers.

Before to compile sobel codes, you need to install some software:
- install Intel C++ Compiler 2023 and Ubuntu 22.04 LTS with WSL enabled on Windows
- Projects use ISO C++ 20 Standart, which provide the function std::format in c++
- install OpenCV (vc15) on the official web site for windows.
- set a variable with the command ``setx OpenCV_DIR {path_to}\opencv\build\x64\vc15``
    - update {path_to} with your OpenCV installation path
    - note: undo with ``REG delete HKCU\Environment /F /V OpenCV_DIR``

For new projets in visual studio:
- please follow this setup with $(OpenCV_DIR) : https://docs.opencv.org/4.x/dd/d6e/tutorial_windows_visual_studio_opencv.html
    - note: in Additional Depencies only add "opencv_world460d.lib", if you use vc15 pre-build and OpenCV 4.60. The file should be in {path_to}\opencv\build\x64\vc15\lib
    - all options: floting point model to strict (OpenCV use NaN and Infinity, which generate a warning in default mode fast)
    - Update project properties for OpenMp support
        - https://learn.microsoft.com/fr-fr/cpp/build/reference/openmp-enable-openmp-2-0-support?view=msvc-170
        - like "g++ -o sobel sobel.cpp -fopenmp"
- update gitignore to ignore projetc folders .vs and x64
    - Example for project Seq-Sobel: /Seq-Sobel/x64/ and /Seq-Sobel/.vs/

Important:
- Images are stored in the images directory.
- Every images generated by sobel should end with "_sobel.jpg", to be ignored by gitignore
- Codes in folder CPU-Sobel and Seq-Sobel use Intel C++ Compiler 2023 for SIMD and Teams support. If you have an Intel GPU, also GPU-Offloading for these devices.
    - https://www.intel.com/content/www/us/en/developer/articles/tool/oneapi-standalone-components.html#dpcpp-cpp

- for offloading the GPU on windows, use WSL Unduntu g++:
    - Instalation of OpenCV please read installation.md in GPU-Sobel folder
    - sudo apt update && sudo apt install g++
    - GCC on gpu: sudo apt install gcc-offload-nvptx
    - Compile code with g++ -o sobel sobel.cpp -fopenmp -foffload=nvptx-none -fcf-protection=none

- For running CUDA version of sobel:
    - please read instalation.md in Cuda-Sobel folder